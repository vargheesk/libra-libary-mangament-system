{% extends "layout.html" %}

{% block header %}Physical Copies Management{% endblock %}

{% block content %}
<div class="mb-8 p-8 glass rounded-3xl border border-white shadow-xl flex items-center justify-between">
    <div>
        <h3 class="text-2xl font-bold text-slate-900 leading-tight">{{ book[1] }}</h3>
        <p class="text-slate-500 font-medium">{{ book[2] }} | ISBN: {{ book[0] }}</p>
    </div>
    <div class="text-right">
        <p class="text-sm text-slate-400">Inventory Management</p>
        <span class="px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-bold">{{ copies|length }} Copies
            Total</span>
    </div>
</div>

<div class="glass rounded-3xl overflow-hidden border border-white shadow-xl">
    <table class="w-full text-left">
        <thead class="bg-slate-50 border-b border-slate-100">
            <tr>
                <th class="px-8 py-4 text-xs font-semibold uppercase text-slate-400">Barcode / Serialization</th>
                <th class="px-8 py-4 text-xs font-semibold uppercase text-slate-400 text-center">Current Status</th>
                <th class="px-8 py-4 text-xs font-semibold uppercase text-slate-400 text-right">Management</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-slate-50">
            {% for copy in copies %}
            <tr class="hover:bg-slate-50/50 transition-colors">
                <td class="px-8 py-4 font-mono text-sm font-bold text-slate-700">{{ copy[0] }}</td>
                <td class="px-8 py-4 text-center">
                    <span
                        class="px-3 py-1 rounded-full text-xs font-bold {{ 'bg-emerald-100 text-emerald-700' if copy[1] == 'AVAILABLE' else 'bg-amber-100 text-amber-700' }}">
                        {{ copy[1] }}
                    </span>
                </td>
                <td class="px-8 py-4 text-right space-x-2">
                    <a href="{{ url_for('generate_barcode_img', barcode_val=copy[0]) }}" target="_blank"
                        class="inline-flex py-1.5 px-3 text-xs font-bold text-indigo-600 border border-indigo-100 rounded-lg hover:bg-indigo-50">
                        <i class="fas fa-barcode mr-2"></i> View
                    </a>
                    <a href="{{ url_for('books_delete_copy', barcode_val=copy[0]) }}"
                        onclick="return confirm('Delete this specific physical copy?')"
                        class="inline-flex py-1.5 px-3 text-xs font-bold text-red-600 border border-red-100 rounded-lg hover:bg-red-50">
                        <i class="fas fa-trash-alt"></i>
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="mt-8 text-center">
    <a href="{{ url_for('books_list') }}" class="text-slate-500 hover:text-slate-900 font-medium transition-colors">
        <i class="fas fa-arrow-left mr-2"></i> Back to Titles
    </a>
</div>
{% endblock %}