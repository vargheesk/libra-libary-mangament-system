{% extends "layout.html" %}

{% block header %}Register New Member{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto">
    <div class="glass p-10 rounded-3xl border border-white shadow-2xl">
        <form action="{{ url_for('users_add') }}" method="POST" enctype="multipart/form-data">
            <div class="space-y-6">
                <!-- Name Input -->
                <div>
                    <label class="block text-sm font-semibold mb-2 text-slate-700">Full Name</label>
                    <input type="text" name="name" required placeholder="John Doe"
                        class="w-full px-5 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition-all">
                </div>

                <!-- Photo Upload -->
                <div>
                    <label class="block text-sm font-semibold mb-2 text-slate-700">Member Photo (for
                        Recognition)</label>
                    <div id="drop-zone"
                        class="relative group h-64 border-2 border-dashed border-slate-200 rounded-3xl flex flex-col items-center justify-center bg-slate-50 hover:bg-slate-100 hover:border-indigo-400 transition-all cursor-pointer">
                        <input type="file" name="photo" id="file-input" required accept="image/*"
                            class="absolute inset-0 opacity-0 cursor-pointer">
                        <div id="preview-container"
                            class="hidden absolute inset-0 rounded-3xl overflow-hidden bg-white">
                            <img id="preview-img" class="w-full h-full object-cover">
                        </div>
                        <div id="upload-prompt" class="text-center p-6 pointer-events-none">
                            <div
                                class="w-16 h-16 bg-white rounded-2xl shadow-sm flex items-center justify-center mx-auto mb-4 group-hover:scale-110 transition-transform">
                                <i class="fas fa-camera text-2xl text-indigo-500"></i>
                            </div>
                            <p class="font-medium text-slate-600">Drag & Drop or Click to Upload</p>
                            <p class="text-xs text-slate-400 mt-1">Make sure the face is clearly visible</p>
                        </div>
                    </div>
                </div>

                <div class="pt-4 flex gap-4">
                    <button type="submit"
                        class="flex-1 py-4 px-6 bg-indigo-600 text-white font-bold rounded-2xl hover:bg-indigo-700 shadow-xl shadow-indigo-200 transform active:scale-95 transition-all">
                        Complete Registration
                    </button>
                    <a href="{{ url_for('users_list') }}"
                        class="py-4 px-8 bg-slate-100 text-slate-600 font-semibold rounded-2xl hover:bg-slate-200 transition-all">
                        Cancel
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    const fileInput = document.getElementById('file-input');
    const previewContainer = document.getElementById('preview-container');
    const previewImg = document.getElementById('preview-img');
    const uploadPrompt = document.getElementById('upload-prompt');

    fileInput.onchange = (e) => {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (event) => {
                previewImg.src = event.target.result;
                previewContainer.classList.remove('hidden');
                uploadPrompt.classList.add('opacity-0');
            };
            reader.readAsDataURL(file);
        }
    };
</script>
{% endblock %}