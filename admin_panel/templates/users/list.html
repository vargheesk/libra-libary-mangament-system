{% extends "layout.html" %}

{% block header %}Member Identity Records{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <div>
        <h3 class="text-lg font-bold text-slate-800">Operational Personnel Registry</h3>
        <p class="text-[10px] text-slate-500 uppercase tracking-widest mt-1">Biometric Authorized Access List</p>
    </div>
    <a href="{{ url_for('users_add') }}"
        class="px-5 py-2 bg-slate-900 text-white rounded text-[10px] font-bold hover:bg-slate-800 transition-all shadow-sm uppercase tracking-widest">
        <i class="fas fa-plus mr-2"></i> Register New Entry
    </a>
</div>

<div class="premium-box overflow-hidden border border-slate-200">
    <table class="w-full text-left text-[11px] border-collapse bg-white">
        <thead>
            <tr class="bg-slate-50 border-b border-slate-200">
                <th
                    class="px-4 py-3 font-bold text-slate-500 uppercase tracking-tight border-r border-slate-200 w-12 text-center">
                    #</th>
                <th
                    class="px-4 py-3 font-bold text-slate-500 uppercase tracking-tight border-r border-slate-200 text-center">
                    Status</th>
                <th class="px-4 py-3 font-bold text-slate-500 uppercase tracking-tight border-r border-slate-200">Full
                    Name</th>
                <th class="px-4 py-3 font-bold text-slate-500 uppercase tracking-tight border-r border-slate-200 w-24">
                    Date of Birth</th>
                <th class="px-4 py-3 font-bold text-slate-500 uppercase tracking-tight border-r border-slate-200 w-32">
                    Mobile Contact</th>
                <th class="px-4 py-3 font-bold text-slate-500 uppercase tracking-tight border-r border-slate-200">
                    Address Info</th>
                <th class="px-4 py-3 font-bold text-slate-500 uppercase tracking-tight border-r border-slate-200 w-28">
                    Created Date</th>
                <th
                    class="px-4 py-3 font-bold text-slate-500 uppercase tracking-tight text-center w-28 bg-slate-100/50">
                    Actions</th>
            </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
            {% for user in users %}
            {% set full_user = get_user(user[0]) %}
            <tr class="hover:bg-indigo-50/20 transition-colors">
                <td class="px-4 py-3 font-mono text-slate-400 border-r border-slate-100 text-center">{{ loop.index }}
                </td>
                <td class="px-4 py-3 border-r border-slate-100 text-center">
                    <span
                        class="inline-flex items-center px-1.5 py-0.5 rounded text-[9px] font-bold bg-emerald-50 text-emerald-600 border border-emerald-100 uppercase">Active</span>
                </td>
                <td class="px-4 py-3 border-r border-slate-100">
                    <div class="font-bold text-slate-800 tracking-tight">{{ user[1] }}</div>
                </td>
                <td class="px-4 py-3 border-r border-slate-100 text-slate-600">
                    {{ full_user[2] if full_user[2] else '—' }}
                </td>
                <td class="px-4 py-3 border-r border-slate-100 font-medium text-slate-700">
                    {{ user[3] if user[3] else '—' }}
                </td>
                <td class="px-4 py-3 border-r border-slate-100 text-slate-500 truncate max-w-[200px]"
                    title="{{ full_user[4] if full_user[4] else '' }}">
                    {{ full_user[4] if full_user[4] else '—' }}
                </td>
                <td class="px-4 py-3 border-r border-slate-100 text-slate-400">
                    {{ user[2].strftime('%d-%b-%Y') }}
                </td>
                <td class="px-4 py-3 text-center bg-slate-50/30">
                    <div class="flex items-center justify-center gap-1.5">
                        <a href="{{ url_for('users_edit', id=user[0]) }}"
                            class="w-8 h-8 flex items-center justify-center border border-slate-200 rounded text-slate-400 hover:text-indigo-600 hover:bg-white transition-all shadow-sm"
                            title="Modify Record">
                            <i class="fas fa-edit text-[10px]"></i>
                        </a>
                        <form action="{{ url_for('users_delete', id=user[0]) }}" method="POST" class="inline"
                            onsubmit="return confirm('Permanent deletion of identity record?')">
                            <button type="submit"
                                class="w-8 h-8 flex items-center justify-center border border-slate-200 rounded text-slate-400 hover:text-rose-600 hover:bg-white transition-all shadow-sm"
                                title="Erase Record">
                                <i class="fas fa-trash-alt text-[10px]"></i>
                            </button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if not users %}
    <div class="p-12 text-center">
        <div
            class="w-12 h-12 bg-slate-50 rounded border border-slate-100 flex items-center justify-center mx-auto mb-3">
            <i class="fas fa-user-slash text-slate-300"></i>
        </div>
        <p class="text-[10px] uppercase font-bold text-slate-400">Empty Registry</p>
    </div>
    {% endif %}
</div>
{% endblock %}